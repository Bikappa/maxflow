(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{57:function(t,e,n){},58:function(t,e,n){},68:function(t,e,n){"use strict";n.r(e);var a=n(3),i=n(0),c=n.n(i),r=n(19),o=n.n(r),s=(n(57),n(58),n(27)),d=n(42),u=n(18),l=n(11),b=n(8),j=n(40),v=n(38),O=n(88),f=n(92),h=n(89),p=n(90),x=n(91),g=n(21),k=n(47);function y(t){return t+"px"}var m=Object(g.a)({arcLabel:{position:"absolute",top:"10px"},arrow:{display:"inline-block",position:"absolute",top:"-2px",left:"20px",border:"solid black",borderWidth:" 0 3px 3px 0",width:"6px",height:"6px",transform:"rotate(-45deg)"}});function w(t){var e,n,i,c=m(),r=t.start,o=t.end,s=t.capacity,d=t.flow,u=(e=r,n=o,Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))),l=function(t,e){return{x:(t.x+e.x)/2,y:(t.y+e.y)/2}}(r,o),b=function(t,e){return Math.atan((e.y-t.y)/(e.x-t.x))+(e.x<t.x?Math.PI:0)}(r,o),j=[255,0,0],v=[0,255,0].map((function(t,e){return t+(j[e]-t)*d/s})),O={top:y(l.y),left:y(l.x),width:y(u),transform:"translateX(".concat(-u/2,"px)")+(i=b,"rotate(".concat(i,"rad)")),backgroundColor:"rgb(".concat(v.join(","),")")};return Object(a.jsxs)("div",{className:"flow-arc",style:O,children:[Object(a.jsx)("i",{className:c.arrow}),Object(a.jsxs)("span",{className:c.arcLabel,children:[d,"/",s]})]})}var A=Object(g.a)({label:{position:"absolute",top:"-2em"}});function C(t){var e=A();return Object(a.jsxs)("div",{className:"flow-node",draggable:!0,onClick:function(e){e.preventDefault(),e.stopPropagation(),t.onClick(t.id)},onDrag:t.onDrag,onDragStart:function(t){var e=new Image;e.src="data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=",t.dataTransfer.setDragImage(e,0,0)},style:{top:y(t.position.y),left:y(t.position.x),backgroundColor:t.bgColor},children:[t.id,t.label?Object(a.jsx)("span",{className:e.label,children:t.label}):null]})}var N=n(69);function D(t){t.onClick,t.disabled;var e=Object(s.a)(t,["onClick","disabled"]);return Object(a.jsx)(N.a,Object(l.a)(Object(l.a)({variant:"contained",onClick:t.onClick,disabled:!t.onClick},e),{},{children:t.children}))}var M=Object(g.a)({canvas:{width:"100%",height:"100vh"}}),S=Object(O.a)((function(t){return{root:{"& > *":{margin:t.spacing(1)}},grow:{flexGrow:1}}})),_=function t(e,n){Object(v.a)(this,t),this.id=void 0,this.value=void 0,this.id=e,this.value=n},I=function(){function t(){Object(v.a)(this,t),this._nodes={},this._adjacencyTable={}}return Object(j.a)(t,[{key:"addNode",value:function(t,e){if(t in this._nodes)throw new Error("Conflicting node id");this._nodes[t]=new _(t,e)}},{key:"addArc",value:function(t,e){this._adjacencyTable[t]||(this._adjacencyTable[t]={}),this._adjacencyTable[t][e]=!0}},{key:"getNodes",value:function(){return this._nodes}},{key:"getArcs",value:function(){return Object.entries(this._adjacencyTable).map((function(t){var e=Object(b.a)(t,2),n=e[0],a=e[1];return Object.entries(a).filter((function(t){return Object(b.a)(t,2)[1]})).map((function(t){var e=Object(b.a)(t,1)[0];return[n,e]}))})).flat()}}]),t}(),T=function(){function t(e,n){Object(v.a)(this,t),this.id=void 0,this.position=void 0,this.id=e,this.position=n}return Object(j.a)(t,[{key:"toString",value:function(){return this.id}}]),t}();function B(t,e){return(e+t*e)/2}function E(t,e){return(2*t-e)/e}function L(t){return{x:B(t.x,window.innerWidth),y:B(t.y,window.innerHeight)}}function P(t){return{x:E(t.x,window.innerWidth),y:E(t.y,window.innerHeight)}}function Q(){var t=S(),e=Object(i.useState)({}),n=Object(b.a)(e,2),c=n[0],r=n[1],o=Object(i.useState)({}),j=Object(b.a)(o,2),v=j[0],O=j[1],g=Object(i.useState)({}),y=Object(b.a)(g,2),m=y[0],A=y[1],N=Object(i.useState)(void 0),_=Object(b.a)(N,2),B=_[0],E=_[1],Q=Object(i.useState)(void 0),U=Object(b.a)(Q,2),W=U[0],X=U[1],G=Object(i.useState)(10),H=(Object(b.a)(G,1)[0],Object(i.useState)(void 0)),J=Object(b.a)(H,2),Y=J[0],q=J[1],F=new I;Object.values(c).forEach((function(t){F.addNode(t.id,new T(t.id,t.position))}));for(var R=0,z=Object.entries(v);R<z.length;R++)for(var K=Object(b.a)(z[R],2),V=K[0],Z=K[1],$=0,tt=Object.entries(Z);$<tt.length;$++){var et=Object(b.a)(tt[$],1)[0];F.addArc(V,et)}var nt=Object(i.useCallback)((function(t,e){e.preventDefault();var n=P({x:e.clientX,y:e.clientY});r((function(e){return Object(l.a)(Object(l.a)({},e),{},Object(u.a)({},t,{id:t,position:n}))}))}),[r]),at=Object(i.useCallback)((function(t){r((function(e){var n={id:""+Object.keys(e).length,position:P({x:t.clientX,y:t.clientY})};return Object(l.a)(Object(l.a)({},e),{},Object(u.a)({},n.id,n))}))}),[r]),it=Y?function(t){t!==Y&&O((function(e){return Object(l.a)(Object(l.a)({},e),{},Object(u.a)({},Y,Object(l.a)(Object(l.a)({},e[Y]),{},Object(u.a)({},t,Math.round(8*Math.random())+2))))})),q(void 0)}:q,ct=B&&W?function(){new Promise((function(t){t(function(t,e,n){var a={},i=Object.keys(n).reduce((function(t,e){for(var a=0,i=Object.keys(n[e]);a<i.length;a++){var c=i[a];t[c]||(t[c]={}),t[e]||(t[e]={}),t[e][c]=n[e][c],t[c][e]=-t[e][c]}return t}),{});function c(t,n,r){var o=[].concat(Object(k.a)(n),[t]);if(t===e)return{visited:o,increase:r};for(var s=null,d=function(){var e,i,d=Object(b.a)(l[u],2),j=d[0],v=d[1];if(n.find((function(t){return t===j})))return"continue";var O=null!==(e=null===(i=a[t])||void 0===i?void 0:i[j])&&void 0!==e?e:0,f=v>=0?v-O:O;return f>0&&(s=c(j,o,Math.min(r,f)))?"break":void 0},u=0,l=Object.entries(null!==(j=i[t])&&void 0!==j?j:{});u<l.length;u++){var j,v=d();if("continue"!==v&&"break"===v)break}return s}for(var r=c(t,[],1/0);r;){for(var o,s=null===(o=r)||void 0===o?void 0:o.visited,d=0;d<s.length-1;d++){var u=[s[d],s[d+1]],l=u[0],j=u[1];a[l]||(a[l]={});var v=!!n[l][j],O=r.increase*(v?1:-1),f=v?[l,j]:[j,l],h=Object(b.a)(f,2),p=h[0],x=h[1];a[p][x]?a[p][x]+=O:a[p][x]=O}r=c(t,[],1/0)}return a}(B,W,v))})).then(A)}:void 0,rt=Y?function(){B===Y&&E(void 0),W===Y&&X(void 0),q(void 0);v[Y];for(var t=Object(s.a)(v,[Y].map(d.a)),e=0,n=Object.values(t);e<n.length;e++){delete n[e][Y]}O(t);c[Y];var a=Object(s.a)(c,[Y].map(d.a));r(a)}:void 0,ot=Y&&Y!==W?function(){E(Y===B?void 0:Y),q(void 0)}:void 0,st=Y&&Y!==B?function(){X(Y===W?void 0:Y),q(void 0)}:void 0,dt=M(),ut=F.getNodes();return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(f.a,{position:"fixed",children:Object(a.jsxs)(h.a,{className:t.root,children:[Object(a.jsx)("div",{className:t.grow}),Object(a.jsxs)(p.a,{variant:"contained",children:[Object(a.jsxs)(D,{onClick:ot,children:[Y===B?"Unm":"M","ark as source"]}),Object(a.jsxs)(D,{onClick:st,children:[Y===W?"Unm":"M","ark as sink"]}),Object(a.jsx)(D,{onClick:rt,children:"Delete"})]}),Object(a.jsx)(D,{onClick:ct,color:"primary",variant:"contained",startIcon:Object(a.jsx)(x.a,{}),children:"Compute"})]})}),Object(a.jsxs)("div",{onClick:at,className:dt.canvas,children:[Object.values(ut).map((function(t){var e=t.value;return Object(a.jsx)(C,Object(l.a)(Object(l.a)({onDrag:function(t){return nt(e.id,t)},onClick:it},e),{},{position:L(e.position),bgColor:e.id===Y?"red":void 0,label:W===e.id?"sink":B===e.id?"source":void 0}),e.id)})),F.getArcs().map((function(t){var e,n=Object(b.a)(t,2),i=n[0],c=n[1];return Object(a.jsx)(w,{flow:(null===(e=m[i])||void 0===e?void 0:e[c])||0,capacity:v[i][c],start:L(ut[i].value.position),end:L(ut[c].value.position)},i+"-"+c)}))]})]})}var U=function(){return Object(a.jsx)(Q,{})};document.addEventListener("dragover",(function(t){t.preventDefault()}),!1),o.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(U,{})}),document.getElementById("root"))}},[[68,1,2]]]);
//# sourceMappingURL=main.42943a67.chunk.js.map